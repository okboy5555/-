/*! demo 2017-09-04 */

!function(){var e=function(t){var i=new e.Index;return i.pipeline.add(e.trimmer,e.stopWordFilter,e.stemmer),t&&t.call(i,i),i};e.version="0.5.12",e.utils={},e.utils.warn=function(e){return function(t){e.console&&console.warn}}(this),e.EventEmitter=function(){this.events={}},e.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),i=e;if("function"!=typeof t)throw new TypeError("last argument must be a function");i.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)},this)},e.EventEmitter.prototype.removeListener=function(e,t){if(this.hasHandler(e)){var i=this.events[e].indexOf(t);this.events[e].splice(i,1),this.events[e].length||delete this.events[e]}},e.EventEmitter.prototype.emit=function(e){if(this.hasHandler(e)){var t=Array.prototype.slice.call(arguments,1);this.events[e].forEach(function(e){e.apply(void 0,t)})}},e.EventEmitter.prototype.hasHandler=function(e){return e in this.events},e.tokenizer=function(e){return arguments.length&&null!=e&&void 0!=e?Array.isArray(e)?e.map(function(e){return e.toLowerCase()}):e.toString().trim().toLowerCase().split(/[\s\-]+/):[]},e.Pipeline=function(){this._stack=[]},e.Pipeline.registeredFunctions={},e.Pipeline.registerFunction=function(t,i){i in this.registeredFunctions&&e.utils.warn("Overwriting existing registered function: "+i),t.label=i,e.Pipeline.registeredFunctions[t.label]=t},e.Pipeline.warnIfFunctionNotRegistered=function(t){t.label&&t.label in this.registeredFunctions||e.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",t)},e.Pipeline.load=function(t){var i=new e.Pipeline;return t.forEach(function(t){var n=e.Pipeline.registeredFunctions[t];if(!n)throw new Error("Cannot load un-registered function: "+t);i.add(n)}),i},e.Pipeline.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(t){e.Pipeline.warnIfFunctionNotRegistered(t),this._stack.push(t)},this)},e.Pipeline.prototype.after=function(t,i){e.Pipeline.warnIfFunctionNotRegistered(i);var n=this._stack.indexOf(t);if(-1==n)throw new Error("Cannot find existingFn");n+=1,this._stack.splice(n,0,i)},e.Pipeline.prototype.before=function(t,i){e.Pipeline.warnIfFunctionNotRegistered(i);var n=this._stack.indexOf(t);if(-1==n)throw new Error("Cannot find existingFn");this._stack.splice(n,0,i)},e.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);-1!=t&&this._stack.splice(t,1)},e.Pipeline.prototype.run=function(e){for(var t=[],i=e.length,n=this._stack.length,o=0;o<i;o++){for(var r=e[o],s=0;s<n&&void 0!==(r=this._stack[s](r,o,e));s++);void 0!==r&&t.push(r)}return t},e.Pipeline.prototype.reset=function(){this._stack=[]},e.Pipeline.prototype.toJSON=function(){return this._stack.map(function(t){return e.Pipeline.warnIfFunctionNotRegistered(t),t.label})},e.Vector=function(){this._magnitude=null,this.list=void 0,this.length=0},e.Vector.Node=function(e,t,i){this.idx=e,this.val=t,this.next=i},e.Vector.prototype.insert=function(t,i){this._magnitude=void 0;var n=this.list;if(!n)return this.list=new e.Vector.Node(t,i,n),this.length++;if(t<n.idx)return this.list=new e.Vector.Node(t,i,n),this.length++;for(var o=n,r=n.next;void 0!=r;){if(t<r.idx)return o.next=new e.Vector.Node(t,i,r),this.length++;o=r,r=r.next}return o.next=new e.Vector.Node(t,i,r),this.length++},e.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e,t=this.list,i=0;t;)i+=(e=t.val)*e,t=t.next;return this._magnitude=Math.sqrt(i)},e.Vector.prototype.dot=function(e){for(var t=this.list,i=e.list,n=0;t&&i;)t.idx<i.idx?t=t.next:t.idx>i.idx?i=i.next:(n+=t.val*i.val,t=t.next,i=i.next);return n},e.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},e.SortedSet=function(){this.length=0,this.elements=[]},e.SortedSet.load=function(e){var t=new this;return t.elements=e,t.length=e.length,t},e.SortedSet.prototype.add=function(){var e,t;for(e=0;e<arguments.length;e++)t=arguments[e],~this.indexOf(t)||this.elements.splice(this.locationFor(t),0,t);this.length=this.elements.length},e.SortedSet.prototype.toArray=function(){return this.elements.slice()},e.SortedSet.prototype.map=function(e,t){return this.elements.map(e,t)},e.SortedSet.prototype.forEach=function(e,t){return this.elements.forEach(e,t)},e.SortedSet.prototype.indexOf=function(e){for(var t=0,i=this.elements.length,n=i-t,o=t+Math.floor(n/2),r=this.elements[o];n>1;){if(r===e)return o;r<e&&(t=o),r>e&&(i=o),n=i-t,o=t+Math.floor(n/2),r=this.elements[o]}return r===e?o:-1},e.SortedSet.prototype.locationFor=function(e){for(var t=0,i=this.elements.length,n=i-t,o=t+Math.floor(n/2),r=this.elements[o];n>1;)r<e&&(t=o),r>e&&(i=o),n=i-t,o=t+Math.floor(n/2),r=this.elements[o];return r>e?o:r<e?o+1:void 0},e.SortedSet.prototype.intersect=function(t){for(var i=new e.SortedSet,n=0,o=0,r=this.length,s=t.length,a=this.elements,h=t.elements;;){if(n>r-1||o>s-1)break;a[n]!==h[o]?a[n]<h[o]?n++:a[n]>h[o]&&o++:(i.add(a[n]),n++,o++)}return i},e.SortedSet.prototype.clone=function(){var t=new e.SortedSet;return t.elements=this.toArray(),t.length=t.elements.length,t},e.SortedSet.prototype.union=function(e){var t,i,n;return this.length>=e.length?(t=this,i=e):(t=e,i=this),(n=t.clone()).add.apply(n,i.toArray()),n},e.SortedSet.prototype.toJSON=function(){return this.toArray()},e.Index=function(){this._fields=[],this._ref="id",this.pipeline=new e.Pipeline,this.documentStore=new e.Store,this.tokenStore=new e.TokenStore,this.corpusTokens=new e.SortedSet,this.eventEmitter=new e.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},e.Index.prototype.on=function(){var e=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,e)},e.Index.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t)},e.Index.load=function(t){t.version!==e.version&&e.utils.warn("version mismatch: current "+e.version+" importing "+t.version);var i=new this;return i._fields=t.fields,i._ref=t.ref,i.documentStore=e.Store.load(t.documentStore),i.tokenStore=e.TokenStore.load(t.tokenStore),i.corpusTokens=e.SortedSet.load(t.corpusTokens),i.pipeline=e.Pipeline.load(t.pipeline),i},e.Index.prototype.field=function(e,t){var i={name:e,boost:(t=t||{}).boost||1};return this._fields.push(i),this},e.Index.prototype.ref=function(e){return this._ref=e,this},e.Index.prototype.add=function(t,i){var n={},o=new e.SortedSet,r=t[this._ref],i=void 0===i||i;this._fields.forEach(function(i){var r=this.pipeline.run(e.tokenizer(t[i.name]));n[i.name]=r,e.SortedSet.prototype.add.apply(o,r)},this),this.documentStore.set(r,o),e.SortedSet.prototype.add.apply(this.corpusTokens,o.toArray());for(var s=0;s<o.length;s++){var a=o.elements[s],h=this._fields.reduce(function(e,t){var i=n[t.name].length;return i?e+n[t.name].filter(function(e){return e===a}).length/i*t.boost:e},0);this.tokenStore.add(a,{ref:r,tf:h})}i&&this.eventEmitter.emit("add",t,this)},e.Index.prototype.remove=function(e,t){var i=e[this._ref],t=void 0===t||t;if(this.documentStore.has(i)){var n=this.documentStore.get(i);this.documentStore.remove(i),n.forEach(function(e){this.tokenStore.remove(e,i)},this),t&&this.eventEmitter.emit("remove",e,this)}},e.Index.prototype.update=function(e,t){var t=void 0===t||t;this.remove(e,!1),this.add(e,!1),t&&this.eventEmitter.emit("update",e,this)},e.Index.prototype.idf=function(e){var t="@"+e;if(Object.prototype.hasOwnProperty.call(this._idfCache,t))return this._idfCache[t];var i=this.tokenStore.count(e),n=1;return i>0&&(n=1+Math.log(this.documentStore.length/i)),this._idfCache[t]=n},e.Index.prototype.search=function(t){var i=this.pipeline.run(e.tokenizer(t)),n=new e.Vector,o=[],r=this._fields.reduce(function(e,t){return e+t.boost},0);return i.some(function(e){return this.tokenStore.has(e)},this)?(i.forEach(function(t,i,s){var a=1/s.length*this._fields.length*r,h=this,u=this.tokenStore.expand(t).reduce(function(i,o){var r=h.corpusTokens.indexOf(o),s=h.idf(o),u=1,l=new e.SortedSet;if(o!==t){var c=Math.max(3,o.length-t.length);u=1/Math.log(c)}return r>-1&&n.insert(r,a*s*u),Object.keys(h.tokenStore.get(o)).forEach(function(e){l.add(e)}),i.union(l)},new e.SortedSet);o.push(u)},this),o.reduce(function(e,t){return e.intersect(t)}).map(function(e){return{ref:e,score:n.similarity(this.documentVector(e))}},this).sort(function(e,t){return t.score-e.score})):[]},e.Index.prototype.documentVector=function(t){for(var i=this.documentStore.get(t),n=i.length,o=new e.Vector,r=0;r<n;r++){var s=i.elements[r],a=this.tokenStore.get(s)[t].tf,h=this.idf(s);o.insert(this.corpusTokens.indexOf(s),a*h)}return o},e.Index.prototype.toJSON=function(){return{version:e.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},e.Index.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},e.Store=function(){this.store={},this.length=0},e.Store.load=function(t){var i=new this;return i.length=t.length,i.store=Object.keys(t.store).reduce(function(i,n){return i[n]=e.SortedSet.load(t.store[n]),i},{}),i},e.Store.prototype.set=function(e,t){this.has(e)||this.length++,this.store[e]=t},e.Store.prototype.get=function(e){return this.store[e]},e.Store.prototype.has=function(e){return e in this.store},e.Store.prototype.remove=function(e){this.has(e)&&(delete this.store[e],this.length--)},e.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},e.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},i="[aeiouy]",n="[^aeiou][^aeiouy]*",o=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),r=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),s=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),a=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy]"),h=/^(.+?)(ss|i)es$/,u=/^(.+?)([^s])s$/,l=/^(.+?)eed$/,c=/^(.+?)(ed|ing)$/,d=/.$/,p=/(at|bl|iz)$/,f=new RegExp("([^aeiouylsz])\\1$"),m=new RegExp("^"+n+i+"[^aeiouwxy]$"),y=/^(.+?[^aeiou])y$/,v=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,g=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,S=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,w=/^(.+?)(s|t)(ion)$/,x=/^(.+?)e$/,k=/ll$/,b=new RegExp("^"+n+i+"[^aeiouwxy]$");return function(i){var n,E,_,F,O,P,N;if(i.length<3)return i;if("y"==(_=i.substr(0,1))&&(i=_.toUpperCase()+i.substr(1)),F=h,O=u,F.test(i)?i=i.replace(F,"$1$2"):O.test(i)&&(i=i.replace(O,"$1$2")),F=l,O=c,F.test(i)){var T=F.exec(i);(F=o).test(T[1])&&(F=d,i=i.replace(F,""))}else O.test(i)&&(n=(T=O.exec(i))[1],(O=a).test(n)&&(i=n,P=f,N=m,(O=p).test(i)?i+="e":P.test(i)?(F=d,i=i.replace(F,"")):N.test(i)&&(i+="e")));return(F=y).test(i)&&(i=(n=(T=F.exec(i))[1])+"i"),(F=v).test(i)&&(n=(T=F.exec(i))[1],E=T[2],(F=o).test(n)&&(i=n+e[E])),(F=g).test(i)&&(n=(T=F.exec(i))[1],E=T[2],(F=o).test(n)&&(i=n+t[E])),F=S,O=w,F.test(i)?(n=(T=F.exec(i))[1],(F=r).test(n)&&(i=n)):O.test(i)&&(n=(T=O.exec(i))[1]+T[2],(O=r).test(n)&&(i=n)),(F=x).test(i)&&(n=(T=F.exec(i))[1],O=s,P=b,((F=r).test(n)||O.test(n)&&!P.test(n))&&(i=n)),F=k,O=r,F.test(i)&&O.test(i)&&(F=d,i=i.replace(F,"")),"y"==_&&(i=_.toLowerCase()+i.substr(1)),i}}(),e.Pipeline.registerFunction(e.stemmer,"stemmer"),e.stopWordFilter=function(t){if(t&&e.stopWordFilter.stopWords[t]!==t)return t},e.stopWordFilter.stopWords={a:"a",able:"able",about:"about",across:"across",after:"after",all:"all",almost:"almost",also:"also",am:"am",among:"among",an:"an",and:"and",any:"any",are:"are",as:"as",at:"at",be:"be",because:"because",been:"been",but:"but",by:"by",can:"can",cannot:"cannot",could:"could",dear:"dear",did:"did",do:"do",does:"does",either:"either",else:"else",ever:"ever",every:"every",for:"for",from:"from",get:"get",got:"got",had:"had",has:"has",have:"have",he:"he",her:"her",hers:"hers",him:"him",his:"his",how:"how",however:"however",i:"i",if:"if",in:"in",into:"into",is:"is",it:"it",its:"its",just:"just",least:"least",let:"let",like:"like",likely:"likely",may:"may",me:"me",might:"might",most:"most",must:"must",my:"my",neither:"neither",no:"no",nor:"nor",not:"not",of:"of",off:"off",often:"often",on:"on",only:"only",or:"or",other:"other",our:"our",own:"own",rather:"rather",said:"said",say:"say",says:"says",she:"she",should:"should",since:"since",so:"so",some:"some",than:"than",that:"that",the:"the",their:"their",them:"them",then:"then",there:"there",these:"these",they:"they",this:"this",tis:"tis",to:"to",too:"too",twas:"twas",us:"us",wants:"wants",was:"was",we:"we",were:"were",what:"what",when:"when",where:"where",which:"which",while:"while",who:"who",whom:"whom",why:"why",will:"will",with:"with",would:"would",yet:"yet",you:"you",your:"your"},e.Pipeline.registerFunction(e.stopWordFilter,"stopWordFilter"),e.trimmer=function(e){var t=e.replace(/^\W+/,"").replace(/\W+$/,"");return""===t?void 0:t},e.Pipeline.registerFunction(e.trimmer,"trimmer"),e.TokenStore=function(){this.root={docs:{}},this.length=0},e.TokenStore.load=function(e){var t=new this;return t.root=e.root,t.length=e.length,t},e.TokenStore.prototype.add=function(e,t,i){var i=i||this.root,n=e[0],o=e.slice(1);return n in i||(i[n]={docs:{}}),0===o.length?(i[n].docs[t.ref]=t,void(this.length+=1)):this.add(o,t,i[n])},e.TokenStore.prototype.has=function(e){if(!e)return!1;for(var t=this.root,i=0;i<e.length;i++){if(!t[e[i]])return!1;t=t[e[i]]}return!0},e.TokenStore.prototype.getNode=function(e){if(!e)return{};for(var t=this.root,i=0;i<e.length;i++){if(!t[e[i]])return{};t=t[e[i]]}return t},e.TokenStore.prototype.get=function(e,t){return this.getNode(e,t).docs||{}},e.TokenStore.prototype.count=function(e,t){return Object.keys(this.get(e,t)).length},e.TokenStore.prototype.remove=function(e,t){if(e){for(var i=this.root,n=0;n<e.length;n++){if(!(e[n]in i))return;i=i[e[n]]}delete i.docs[t]}},e.TokenStore.prototype.expand=function(e,t){var i=this.getNode(e),n=i.docs||{},t=t||[];return Object.keys(n).length&&t.push(e),Object.keys(i).forEach(function(i){"docs"!==i&&t.concat(this.expand(e+i,t))},this),t},e.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.lunr=t()}(this,function(){return e})}(),function(){var e=function(t){var i=new e.Index;return i.pipeline.add(e.trimmer,e.stopWordFilter,e.stemmer),t&&t.call(i,i),i};e.version="0.5.12",e.utils={},e.utils.warn=function(e){return function(t){e.console&&console.warn}}(this),e.EventEmitter=function(){this.events={}},e.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),i=e;if("function"!=typeof t)throw new TypeError("last argument must be a function");i.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)},this)},e.EventEmitter.prototype.removeListener=function(e,t){if(this.hasHandler(e)){var i=this.events[e].indexOf(t);this.events[e].splice(i,1),this.events[e].length||delete this.events[e]}},e.EventEmitter.prototype.emit=function(e){if(this.hasHandler(e)){var t=Array.prototype.slice.call(arguments,1);this.events[e].forEach(function(e){e.apply(void 0,t)})}},e.EventEmitter.prototype.hasHandler=function(e){return e in this.events},e.tokenizer=function(e){return arguments.length&&null!=e&&void 0!=e?Array.isArray(e)?e.map(function(e){return e.toLowerCase()}):e.toString().trim().toLowerCase().split(/[\s\-]+/):[]},e.Pipeline=function(){this._stack=[]},e.Pipeline.registeredFunctions={},e.Pipeline.registerFunction=function(t,i){i in this.registeredFunctions&&e.utils.warn("Overwriting existing registered function: "+i),t.label=i,e.Pipeline.registeredFunctions[t.label]=t},e.Pipeline.warnIfFunctionNotRegistered=function(t){t.label&&t.label in this.registeredFunctions||e.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",t)},e.Pipeline.load=function(t){var i=new e.Pipeline;return t.forEach(function(t){var n=e.Pipeline.registeredFunctions[t];if(!n)throw new Error("Cannot load un-registered function: "+t);i.add(n)}),i},e.Pipeline.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(t){e.Pipeline.warnIfFunctionNotRegistered(t),this._stack.push(t)},this)},e.Pipeline.prototype.after=function(t,i){e.Pipeline.warnIfFunctionNotRegistered(i);var n=this._stack.indexOf(t);if(-1==n)throw new Error("Cannot find existingFn");n+=1,this._stack.splice(n,0,i)},e.Pipeline.prototype.before=function(t,i){e.Pipeline.warnIfFunctionNotRegistered(i);var n=this._stack.indexOf(t);if(-1==n)throw new Error("Cannot find existingFn");this._stack.splice(n,0,i)},e.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);-1!=t&&this._stack.splice(t,1)},e.Pipeline.prototype.run=function(e){for(var t=[],i=e.length,n=this._stack.length,o=0;i>o;o++){for(var r=e[o],s=0;n>s&&void 0!==(r=this._stack[s](r,o,e));s++);void 0!==r&&t.push(r)}return t},e.Pipeline.prototype.reset=function(){this._stack=[]},e.Pipeline.prototype.toJSON=function(){return this._stack.map(function(t){return e.Pipeline.warnIfFunctionNotRegistered(t),t.label})},e.Vector=function(){this._magnitude=null,this.list=void 0,this.length=0},e.Vector.Node=function(e,t,i){this.idx=e,this.val=t,this.next=i},e.Vector.prototype.insert=function(t,i){this._magnitude=void 0;var n=this.list;if(!n)return this.list=new e.Vector.Node(t,i,n),this.length++;if(t<n.idx)return this.list=new e.Vector.Node(t,i,n),this.length++;for(var o=n,r=n.next;void 0!=r;){if(t<r.idx)return o.next=new e.Vector.Node(t,i,r),this.length++;o=r,r=r.next}return o.next=new e.Vector.Node(t,i,r),this.length++},e.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e,t=this.list,i=0;t;)e=t.val,i+=e*e,t=t.next;return this._magnitude=Math.sqrt(i)},e.Vector.prototype.dot=function(e){for(var t=this.list,i=e.list,n=0;t&&i;)t.idx<i.idx?t=t.next:t.idx>i.idx?i=i.next:(n+=t.val*i.val,t=t.next,i=i.next);return n},e.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},e.SortedSet=function(){this.length=0,this.elements=[]},e.SortedSet.load=function(e){var t=new this;return t.elements=e,t.length=e.length,t},e.SortedSet.prototype.add=function(){var e,t;for(e=0;e<arguments.length;e++)t=arguments[e],~this.indexOf(t)||this.elements.splice(this.locationFor(t),0,t);this.length=this.elements.length},e.SortedSet.prototype.toArray=function(){return this.elements.slice()},e.SortedSet.prototype.map=function(e,t){return this.elements.map(e,t)},e.SortedSet.prototype.forEach=function(e,t){return this.elements.forEach(e,t)},e.SortedSet.prototype.indexOf=function(e){for(var t=0,i=this.elements.length,n=i-t,o=t+Math.floor(n/2),r=this.elements[o];n>1;){if(r===e)return o;e>r&&(t=o),r>e&&(i=o),n=i-t,o=t+Math.floor(n/2),r=this.elements[o]}return r===e?o:-1},e.SortedSet.prototype.locationFor=function(e){for(var t=0,i=this.elements.length,n=i-t,o=t+Math.floor(n/2),r=this.elements[o];n>1;)e>r&&(t=o),r>e&&(i=o),n=i-t,o=t+Math.floor(n/2),r=this.elements[o];return r>e?o:e>r?o+1:void 0},e.SortedSet.prototype.intersect=function(t){for(var i=new e.SortedSet,n=0,o=0,r=this.length,s=t.length,a=this.elements,h=t.elements;!(n>r-1||o>s-1);)a[n]!==h[o]?a[n]<h[o]?n++:a[n]>h[o]&&o++:(i.add(a[n]),n++,o++);return i},e.SortedSet.prototype.clone=function(){var t=new e.SortedSet;return t.elements=this.toArray(),t.length=t.elements.length,t},e.SortedSet.prototype.union=function(e){var t,i,n;return this.length>=e.length?(t=this,i=e):(t=e,i=this),(n=t.clone()).add.apply(n,i.toArray()),n},e.SortedSet.prototype.toJSON=function(){return this.toArray()},e.Index=function(){this._fields=[],this._ref="id",this.pipeline=new e.Pipeline,this.documentStore=new e.Store,this.tokenStore=new e.TokenStore,this.corpusTokens=new e.SortedSet,this.eventEmitter=new e.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},e.Index.prototype.on=function(){var e=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,e)},e.Index.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t)},e.Index.load=function(t){t.version!==e.version&&e.utils.warn("version mismatch: current "+e.version+" importing "+t.version);var i=new this;return i._fields=t.fields,i._ref=t.ref,i.documentStore=e.Store.load(t.documentStore),i.tokenStore=e.TokenStore.load(t.tokenStore),i.corpusTokens=e.SortedSet.load(t.corpusTokens),i.pipeline=e.Pipeline.load(t.pipeline),i},e.Index.prototype.field=function(e,t){var i={name:e,boost:(t=t||{}).boost||1};return this._fields.push(i),this},e.Index.prototype.ref=function(e){return this._ref=e,this},e.Index.prototype.add=function(t,i){var n={},o=new e.SortedSet,r=t[this._ref],i=void 0===i||i;this._fields.forEach(function(i){var r=this.pipeline.run(e.tokenizer(t[i.name]));n[i.name]=r,e.SortedSet.prototype.add.apply(o,r)},this),this.documentStore.set(r,o),e.SortedSet.prototype.add.apply(this.corpusTokens,o.toArray());for(var s=0;s<o.length;s++){var a=o.elements[s],h=this._fields.reduce(function(e,t){var i=n[t.name].length;return i?e+n[t.name].filter(function(e){return e===a}).length/i*t.boost:e},0);this.tokenStore.add(a,{ref:r,tf:h})}i&&this.eventEmitter.emit("add",t,this)},e.Index.prototype.remove=function(e,t){var i=e[this._ref],t=void 0===t||t;if(this.documentStore.has(i)){var n=this.documentStore.get(i);this.documentStore.remove(i),n.forEach(function(e){this.tokenStore.remove(e,i)},this),t&&this.eventEmitter.emit("remove",e,this)}},e.Index.prototype.update=function(e,t){var t=void 0===t||t;this.remove(e,!1),this.add(e,!1),t&&this.eventEmitter.emit("update",e,this)},e.Index.prototype.idf=function(e){var t="@"+e;if(Object.prototype.hasOwnProperty.call(this._idfCache,t))return this._idfCache[t];var i=this.tokenStore.count(e),n=1;return i>0&&(n=1+Math.log(this.documentStore.length/i)),this._idfCache[t]=n},e.Index.prototype.search=function(t){var i=this.pipeline.run(e.tokenizer(t)),n=new e.Vector,o=[],r=this._fields.reduce(function(e,t){return e+t.boost},0);return i.some(function(e){return this.tokenStore.has(e)},this)?(i.forEach(function(t,i,s){var a=1/s.length*this._fields.length*r,h=this,u=this.tokenStore.expand(t).reduce(function(i,o){var r=h.corpusTokens.indexOf(o),s=h.idf(o),u=1,l=new e.SortedSet;if(o!==t){var c=Math.max(3,o.length-t.length);u=1/Math.log(c)}return r>-1&&n.insert(r,a*s*u),Object.keys(h.tokenStore.get(o)).forEach(function(e){l.add(e)}),i.union(l)},new e.SortedSet);o.push(u)},this),o.reduce(function(e,t){return e.intersect(t)}).map(function(e){return{ref:e,score:n.similarity(this.documentVector(e))}},this).sort(function(e,t){return t.score-e.score})):[]},e.Index.prototype.documentVector=function(t){for(var i=this.documentStore.get(t),n=i.length,o=new e.Vector,r=0;n>r;r++){var s=i.elements[r],a=this.tokenStore.get(s)[t].tf,h=this.idf(s);o.insert(this.corpusTokens.indexOf(s),a*h)}return o},e.Index.prototype.toJSON=function(){return{version:e.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},e.Index.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},e.Store=function(){this.store={},this.length=0},e.Store.load=function(t){var i=new this;return i.length=t.length,i.store=Object.keys(t.store).reduce(function(i,n){return i[n]=e.SortedSet.load(t.store[n]),i},{}),i},e.Store.prototype.set=function(e,t){this.has(e)||this.length++,this.store[e]=t},e.Store.prototype.get=function(e){return this.store[e]},e.Store.prototype.has=function(e){return e in this.store},e.Store.prototype.remove=function(e){this.has(e)&&(delete this.store[e],this.length--)},e.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},e.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},i="[aeiouy]",n="[^aeiou][^aeiouy]*",o=i+"[aeiou]*",r=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),s=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),a=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),h=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy]"),u=/^(.+?)(ss|i)es$/,l=/^(.+?)([^s])s$/,c=/^(.+?)eed$/,d=/^(.+?)(ed|ing)$/,p=/.$/,f=/(at|bl|iz)$/,m=new RegExp("([^aeiouylsz])\\1$"),y=new RegExp("^"+n+i+"[^aeiouwxy]$"),v=/^(.+?[^aeiou])y$/,g=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,S=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,w=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,x=/^(.+?)(s|t)(ion)$/,k=/^(.+?)e$/,b=/ll$/,E=new RegExp("^"+n+i+"[^aeiouwxy]$");return function(i){var n,o,_,F,O,P,N;if(i.length<3)return i;if("y"==(_=i.substr(0,1))&&(i=_.toUpperCase()+i.substr(1)),F=u,O=l,F.test(i)?i=i.replace(F,"$1$2"):O.test(i)&&(i=i.replace(O,"$1$2")),F=c,O=d,F.test(i)){var T=F.exec(i);(F=r).test(T[1])&&(F=p,i=i.replace(F,""))}else O.test(i)&&(n=(T=O.exec(i))[1],(O=h).test(n)&&(i=n,O=f,P=m,N=y,O.test(i)?i+="e":P.test(i)?(F=p,i=i.replace(F,"")):N.test(i)&&(i+="e")));return(F=v).test(i)&&(i=(n=(T=F.exec(i))[1])+"i"),(F=g).test(i)&&(n=(T=F.exec(i))[1],o=T[2],(F=r).test(n)&&(i=n+e[o])),(F=S).test(i)&&(n=(T=F.exec(i))[1],o=T[2],(F=r).test(n)&&(i=n+t[o])),F=w,O=x,F.test(i)?(n=(T=F.exec(i))[1],(F=s).test(n)&&(i=n)):O.test(i)&&(n=(T=O.exec(i))[1]+T[2],(O=s).test(n)&&(i=n)),(F=k).test(i)&&(n=(T=F.exec(i))[1],O=a,P=E,((F=s).test(n)||O.test(n)&&!P.test(n))&&(i=n)),F=b,O=s,F.test(i)&&O.test(i)&&(F=p,i=i.replace(F,"")),"y"==_&&(i=_.toLowerCase()+i.substr(1)),i}}(),e.Pipeline.registerFunction(e.stemmer,"stemmer"),e.stopWordFilter=function(t){return t&&e.stopWordFilter.stopWords[t]!==t?t:void 0},e.stopWordFilter.stopWords={a:"a",able:"able",about:"about",across:"across",after:"after",all:"all",almost:"almost",also:"also",am:"am",among:"among",an:"an",and:"and",any:"any",are:"are",as:"as",at:"at",be:"be",because:"because",been:"been",but:"but",by:"by",can:"can",cannot:"cannot",could:"could",dear:"dear",did:"did",do:"do",does:"does",either:"either",else:"else",ever:"ever",every:"every",for:"for",from:"from",get:"get",got:"got",had:"had",has:"has",have:"have",he:"he",her:"her",hers:"hers",him:"him",his:"his",how:"how",however:"however",i:"i",if:"if",in:"in",into:"into",is:"is",it:"it",its:"its",just:"just",least:"least",let:"let",like:"like",likely:"likely",may:"may",me:"me",might:"might",most:"most",must:"must",my:"my",neither:"neither",no:"no",nor:"nor",not:"not",of:"of",off:"off",often:"often",on:"on",only:"only",or:"or",other:"other",our:"our",own:"own",rather:"rather",said:"said",say:"say",says:"says",she:"she",should:"should",since:"since",so:"so",some:"some",than:"than",that:"that",the:"the",their:"their",them:"them",then:"then",there:"there",these:"these",they:"they",this:"this",tis:"tis",to:"to",too:"too",twas:"twas",us:"us",wants:"wants",was:"was",we:"we",were:"were",what:"what",when:"when",where:"where",which:"which",while:"while",who:"who",whom:"whom",why:"why",will:"will",with:"with",would:"would",yet:"yet",you:"you",your:"your"},e.Pipeline.registerFunction(e.stopWordFilter,"stopWordFilter"),e.trimmer=function(e){var t=e.replace(/^\W+/,"").replace(/\W+$/,"");return""===t?void 0:t},e.Pipeline.registerFunction(e.trimmer,"trimmer"),e.TokenStore=function(){this.root={docs:{}},this.length=0},e.TokenStore.load=function(e){var t=new this;return t.root=e.root,t.length=e.length,t},e.TokenStore.prototype.add=function(e,t,i){var i=i||this.root,n=e[0],o=e.slice(1);return n in i||(i[n]={docs:{}}),0===o.length?(i[n].docs[t.ref]=t,void(this.length+=1)):this.add(o,t,i[n])},e.TokenStore.prototype.has=function(e){if(!e)return!1;for(var t=this.root,i=0;i<e.length;i++){if(!t[e[i]])return!1;t=t[e[i]]}return!0},e.TokenStore.prototype.getNode=function(e){if(!e)return{};for(var t=this.root,i=0;i<e.length;i++){if(!t[e[i]])return{};t=t[e[i]]}return t},e.TokenStore.prototype.get=function(e,t){return this.getNode(e,t).docs||{}},e.TokenStore.prototype.count=function(e,t){return Object.keys(this.get(e,t)).length},e.TokenStore.prototype.remove=function(e,t){if(e){for(var i=this.root,n=0;n<e.length;n++){if(!(e[n]in i))return;i=i[e[n]]}delete i.docs[t]}},e.TokenStore.prototype.expand=function(e,t){var i=this.getNode(e),n=i.docs||{},t=t||[];return Object.keys(n).length&&t.push(e),Object.keys(i).forEach(function(i){"docs"!==i&&t.concat(this.expand(e+i,t))},this),t},e.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.lunr=t()}(this,function(){return e})}();