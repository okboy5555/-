/*! demo 2017-09-04 */

var http=require("http"),url=require("url"),join=require("path").join,extname=require("path").extname,join=require("path").join,fs=require("fs"),port=process.argv[2]||3e3,mime={html:"text/html",css:"text/css",js:"application/javascript"};http.createServer(function(e,t){function r(){t.statusCode=404,t.end("404 Not Found\n")}function i(e){t.statusCode=500,t.end(e.message+"\n")}var n=url.parse(e.url).pathname,s=join(process.cwd(),n);fs.exists(s,function(e){if(!e)return r();fs.stat(s,function(e,r){if(e)return i();r.isDirectory()&&(s=join(s,"index.html")),t.setHeader("Cache-Control","no-cache"),t.setHeader("Content-Type",mime[s.split(".").slice(-1)]||"application/octet-stream"),fs.createReadStream(s).pipe(t)})})}).listen(port);