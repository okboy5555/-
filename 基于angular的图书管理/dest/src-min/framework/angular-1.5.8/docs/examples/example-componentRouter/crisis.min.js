/*! demo 2017-09-04 */

!function(i){"use strict";window.angular.module("crisis-center",["dialog"]).service("crisisService",function(i){var t=i.when([{id:1,name:"Princess Held Captive"},{id:2,name:"Dragon Burning Cities"},{id:3,name:"Giant Asteroid Heading For Earth"},{id:4,name:"Release Deadline Looms"}]);this.getCrises=function(){return t},this.getCrisis=function(i){return t.then(function(t){for(var e=0;e<t.length;e++)if(t[e].id==i)return t[e]})}}).component("crisisCenter",{template:"<h2>Crisis Center</h2><ng-outlet></ng-outlet>",$routeConfig:[{path:"/",name:"CrisisList",component:"crisisList",useAsDefault:!0},{path:"/:id",name:"CrisisDetail",component:"crisisDetail"}]}).component("crisisList",{template:'<ul>\n  <li ng-repeat="crisis in $ctrl.crises"\n    ng-class="{ selected: $ctrl.isSelected(crisis) }"\n    ng-click="$ctrl.onSelect(crisis)">\n    <span class="badge">{{crisis.id}}</span> {{crisis.name}}\n  </li>\n</ul>\n',bindings:{$router:"<"},controller:function(i){var t=null,e=this;this.$routerOnActivate=function(s){i.getCrises().then(function(i){e.crises=i,t=s.params.id})},this.isSelected=function(i){return i.id==t},this.onSelect=function(i){this.$router.navigate(["CrisisDetail",{id:i.id}])}},$canActivate:function(i,t){}}).component("crisisDetail",{templateUrl:"crisisDetail.html",bindings:{$router:"<"},controller:function(i,t){var e=this;this.$routerOnActivate=function(t){var s=t.params.id;i.getCrisis(s).then(function(i){i?(e.editName=i.name,e.crisis=i):e.gotoCrises()})},this.$routerCanDeactivate=function(){return!this.crisis||this.crisis.name===this.editName||t.confirm("Discard changes?")},this.cancel=function(){e.editName=e.crisis.name,e.gotoCrises()},this.save=function(){e.crisis.name=e.editName,e.gotoCrises()},this.gotoCrises=function(){var i=e.crisis&&e.crisis.id;this.$router.navigate(["CrisisList",{id:i}])}}})}();